var sb=sb||{};sb.minimeshu=function(f){var c={},d=$(f).width()+"px",b=$(f).height()+"px",e=sb.map(f,d,b),g=sb.mesh(f,e,d,b);function a(h,i){g.add(h.latitude,h.longitude,i);c.updateBounds()}c.locations=function(h){var j={},l=[];for(var k=0;k<h.length;k++){var m=h[k];if(!j[m.name]){l.push({name:m.times&&m.times>1?m.name+" ("+m.times+")":m.name,latitude:+m.latitude,longitude:+m.longitude});j[m.name]=true}}g.locations(l)};c.locationData=function(n){var h=n.split("|");var m=[],k={};for(var l=0;l<h.length;l++){var j=h[l].split("\t");if(j.length<3){continue}var o=j[0]+"-"+j[1];if(k[o]){continue}else{k[o]=true}m.push({latitude:parseFloat(j[0]),longitude:parseFloat(j[1]),name:j[2]})}g.locations(m);return c};c.mesh=function(){return g};c.updateBounds=function(h){e.updateBounds(g.lats(),g.lons(),h)};e.on("boundsUpdated",function(){g.updatePixelBounds();g.refresh()});g.on("locationsSet",function(){c.updateBounds(-0.2)});c.outputSVG=function(){return g.output()};c.outputLocationData=function(){var h=[];var j=g.places(),k=g.lats(),i=g.lons();$.each(j,function(m){var l=k[m]+"\t"+i[m]+"\t"+j[m];h.push(l)});return h.join("|")};return c};