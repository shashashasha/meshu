var sb=sb||{};sb.minimeshu=function(f){var c={},d=$(f).width()+"px",b=$(f).height()+"px",e=sb.map(f,d,b),g=sb.mesh(f,e,d,b);function a(h,i){g.add(h.latitude,h.longitude,i);c.updateBounds()}c.locations=function(h){var j={},l=[];for(var k=0;k<h.length;k++){var m=h[k];if(!j[m.name]){l.push({name:m.times&&m.times>1?m.name+" ("+m.times+")":m.name,latitude:+m.latitude,longitude:+m.longitude});j[m.name]=true}}g.locations(l);c.updateBounds()};c.locationData=function(m){var h=m.split("|");var l=[];for(var k=0;k<h.length;k++){var j=h[k].split("\t");if(j.length<3){continue}l.push({latitude:parseFloat(j[0]),longitude:parseFloat(j[1]),name:j[2]})}g.locations(l);return c};c.mesh=function(){return g};c.updateBounds=function(){e.updateBounds(g.lats(),g.lons())};e.on("boundsUpdated",function(){g.updatePixelBounds();g.refresh()});g.on("locationsSet",c.updateBounds);c.outputSVG=function(){return g.output()};c.outputLocationData=function(){var h=[];var j=g.places(),k=g.lats(),i=g.lons();$.each(j,function(m){var l=k[m]+"\t"+i[m]+"\t"+j[m];h.push(l)});return h.join("|")};return c};