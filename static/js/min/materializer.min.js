var sb=sb||{};sb.materializer=function(){var b=d3.dispatch("update"),c,f,g,e,d,a;b.initialize=function(j,i,h){c=j;f=i;g=h;b.materials=$("#material-list li");b.colors=$("#color-list li");b.materials.click(function(k){b.material(k.target.id)});b.colors.click(function(k){b.color(k.target.innerHTML)});$(".option-list li").live("click",function(){var k=$(this);k.parent().find("li").removeClass("selected");k.addClass("selected")})};b.product=function(l){if(!arguments.length){return e}e=l;var h=c[l];b.materials.hide();d=null;for(var j in h){if(!d){b.material(j)}$("#"+j).show()}var k=f[e];var m=k.charAt(0).toUpperCase()+k.slice(1);$("#readymade-type").text(m);return b};b.material=function(h){if(!arguments.length){return d}d=h;b.materials.removeClass("selected");$("#"+d).addClass("selected");var i=c[e][d].colors;if(i){b.colors.find(".color-title").empty();b.colors.find("img").attr("src","");$(".options.right").fadeIn();$.each(i,function(l,m){var k=b.colors.eq(l);var j=static_url+"images/materials/"+d+"_"+m.replace(" ","_").toLowerCase()+".png";k.find(".color-title").text(m);k.find(".color-img img").attr("src",j);k.attr("id","color-"+m.replace(" ","-").toLowerCase())});b.color(i[0])}else{$(".options.right").fadeOut();b.color("")}orderer.updateProduct(e,d);$("#total-cost").text(orderer.getPriceString());return b};b.color=function(h){if(!arguments.length){return a}a=h;b.colors.removeClass("selected");$("#color-"+a.replace(" ","-").toLowerCase()).addClass("selected");b.update();return b};b.productName=function(){return g[e]};b.displayName=function(){return f[e].toLowerCase()};return b}();