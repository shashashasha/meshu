var sb=sb||{};sb.materializer=function(){var c=d3.dispatch("update"),a,f,g,e,d,b;f={earrings:"pair of earrings",pendant:"small pendant necklace",necklace:"large necklace",cufflinks:"pair of cufflinks"};g={earrings:"earrings",pendant:"pendant necklace",necklace:"large necklace",cufflinks:"cufflinks"};c.initialize=function(h){a=h;c.materials=$("#material-list li");c.colors=$("#color-list li");c.materials.click(function(i){c.material(i.target.id)});c.colors.click(function(i){var j=i.currentTarget.id.split("-")[1];c.color(j)});$(".option-list li").live("click",function(){var i=$(this);i.parent().find("li").removeClass("selected");i.addClass("selected")})};c.product=function(m){if(!arguments.length){return e}e=m;var h=a.getMaterials(m);c.materials.hide();d=null;for(var j=0;j<h.length;j++){var l=h[j];if(!d){c.material(l)}$("#"+l).show()}var k=f[e];var n=k.charAt(0).toUpperCase()+k.slice(1);$("#readymade-type").text(n);return c};c.material=function(h){if(!arguments.length){return d}d=h;c.materials.removeClass("selected");$("#"+d).addClass("selected");var i=a.getColors(e,d);if(i){c.colors.find(".color-title").empty();c.colors.find("img").attr("src","");$(".options.right").fadeIn();$.each(i,function(l,m){var k=c.colors.eq(l);var j=static_url+"images/materials/"+d+"_"+m.replace(" ","_").toLowerCase()+".png";k.find(".color-title").text(m);k.find(".color-img img").attr("src",j);k.attr("id","color-"+m.replace(" ","-").toLowerCase())});c.color(i[0])}else{$(".options.right").fadeOut();c.color("")}orderer.updateProduct(e,d);$("#total-cost").text(orderer.getPriceString());return c};c.color=function(h){if(!arguments.length){return b}b=h;c.colors.removeClass("selected");$("#color-"+b.replace(" ","-").toLowerCase()).addClass("selected");c.update();return c};c.productName=function(){return g[e]};c.displayName=function(){return f[e].toLowerCase()};return c}();