var sb=sb||{};sb.viewhandler=function(){var c=d3.dispatch("updated","next","prev");var b=["edit","product","make","add-ons","checkout","review"];var f=$("#content");$("#product").waypoint(function(g){if(g=="down"){d()}else{e()}},{offset:500});$("#materials").waypoint(function(g){if(g=="down"){if(sb.materializer.product()){sb.rotator.update(sb.materializer.product())}}},{offset:550});$("#review").waypoint(function(g){if(g=="down"){a()}},{offset:700});function a(){if(sb.materializer.product()){$(".review-product").removeClass("inactive").text(sb.materializer.product())}if(sb.materializer.color()&&sb.materializer.material()){$(".review-material").removeClass("inactive").text(sb.materializer.color()+" "+sb.materializer.material())}if(sb.materializer.product()&&sb.materializer.color()&&sb.materializer.material()){$(".review-price").text(cashier.getPriceString());$("#add-to-cart").removeClass("inactive")}}c.updateAccountView=function(){};function d(){var j=$(this);var g=c.view();var h=b.indexOf(g);var i=function(){f.attr("class",b[h+1])};if(g=="edit"&&user.loggedIn){saver.createOrUpdateMeshu()}c.next();i()}function e(){var g=c.view();var h=b.indexOf(g);var i=b[h-1];f.attr("class",i);c.prev()}c.view=function(g){if(!arguments.length){return f.attr("class")}var h=b.indexOf(g);if(h!=-1){f.attr("class",b[h]);view=g}};return c}();