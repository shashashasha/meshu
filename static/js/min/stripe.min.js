Stripe.setPublishableKey("pk_GtEuTncR1hDqm7tP3oz9RRM9XOLub");var cashier=function(){var i={},g=totalPrice||0,f=0,e=1,c=7,d=7,h=45,b=80;function a(j,k){if(k.error){$("#submit-button").removeAttr("disabled").removeClass("inactive");$(".payment-note").css({color:"#FF3FB4"}).html("There was an error processing your card. Maybe there was a typo?");$(window).click(function(){$(".payment-note").css({color:"#8F8F8F"}).html('All of our payments are securely handled through <a href="https://stripe.com/help/security" target="_blank">Stripe</a>')})}else{var m=$("#payment-form");var l=k.id;m.append("<input type='hidden' name='stripe_token' value='"+l+"' />");m.append("<input type='hidden' name='coupon_amount' value='"+i.getDiscountCents()+"' />");m.append("<input type='hidden' name='shipping_amount' value='"+i.getShippingCents()+"' />");m.append("<input type='hidden' name='final_amount' value='"+i.getFinalCents()+"' />");m.get(0).submit()}}i.submit=function(){if(i.getFinalCents()<2000){return}$("#submit-button").attr("disabled","disabled").addClass("inactive");$(".card-info").removeAttr("name");$(".loading").show();Stripe.createToken({number:$("#card-number").val(),cvc:$("#card-cvc").val(),exp_month:$("#card-expiry-month").val(),exp_year:$("#card-expiry-year").val()},i.getFinalCents(),a);return false};i.update=function(){if(c==0){$("#shipping-price .dollar").html('<span class="pink">free!&nbsp;</span>');$("#shipping-price .num").html('<span style="text-decoration: line-through;">$5.00</span>')}else{$("#shipping-price .dollar").text("$");$("#shipping-price .num").text(c+".00")}$("#total-price .num").text(i.getTotal()+".00")};i.shippingMode=function(k){var l=0,j=0;$(".earrings .num").each(function(m,n){j+=parseInt($(this).text())});$(".necklace .num").each(function(m,n){j+=parseInt($(this).text())});$(".pendant .num").each(function(m,n){j+=parseInt($(this).text())});$(".cufflinks .num").each(function(m,n){j+=parseInt($(this).text())});$(".ring .num").each(function(m,n){l+=parseInt($(this).text())});if(j>0||l>0){c=k=="international"?(j>2?b:h):d}else{c=d}if(k=="international"){$(".medium_poster .num").each(function(m,n){c+=parseInt($(this).text())*4});$(".large_poster .num").each(function(m,n){c+=parseInt($(this).text())*10});$(".small_poster .num").each(function(m,n){c+=parseInt($(this).text())*4})}i.update()};i.shippingCountry=function(j){switch(j){case"United States":c=d;break;case"Canada":c=h=35;break;default:c=h=45}i.shippingMode(j=="United States"?"domestic":"international")};i.applyCoupon=function(j,k){$.get("/order/apply_coupon",{code:j},function(m){if(m.success){$("#payment-form").append("<input type='hidden' name='coupon_code' value='"+j+"' />");var n=parseFloat(m.amount);if(n<1&&n>0){e=n;f=Math.round(i.getPrice()*(1-e));var l=Math.round((1-e)*100);m.message="("+l+"% off!) -$"+f+".00"}else{if(n>0){f=parseInt(m.amount);m.message="-$"+f+".00"}}}else{f=0;e=1}if(k){k(m)}},"json")};i.getPrice=function(){return g};i.getTotal=function(){return Math.floor(i.getPrice()-f)+c};i.getShippingCents=function(){return c*100};i.getDiscountCents=function(){return f*100};i.getFinalCents=function(){return Math.floor(i.getTotal()*100)};return i}();