Stripe.setPublishableKey("pk_GtEuTncR1hDqm7tP3oz9RRM9XOLub");var cashier=function(){var i={},g=totalPrice,f=0,e=1,c=0,d=0,h=45,b=80;function a(j,k){var m=$("#payment-form");var l=k.id;m.append("<input type='hidden' name='stripe_token' value='"+l+"' />");m.append("<input type='hidden' name='coupon_amount' value='"+i.getDiscountCents()+"' />");m.append("<input type='hidden' name='shipping_amount' value='"+i.getShippingCents()+"' />");m.get(0).submit()}i.submit=function(){if(i.getFinalCents()<2000){return}$("#submit-button").attr("disabled","disabled").addClass("inactive");$(".card-info").removeAttr("name");$(".loading").show();Stripe.createToken({number:$("#card-number").val(),cvc:$("#card-cvc").val(),exp_month:$("#card-expiry-month").val(),exp_year:$("#card-expiry-year").val()},i.getFinalCents(),a);return false};i.update=function(){if(c==0){$("#shipping-price .dollar").html('<span class="pink">free!&nbsp;</span>');$("#shipping-price .num").html('<span style="text-decoration: line-through;">$5.00</span>')}else{$("#shipping-price .dollar").text("$");$("#shipping-price .num").text(c+".00")}$("#total-price .num").text(i.getTotal()+".00")};i.shippingMode=function(l){var j=0,m=0;$(".cart-row .num").each(function(n,o){j+=parseInt($(this).text())});$(".ring .num").each(function(n,o){m+=parseInt($(this).text())});var k=j-m;c=l=="international"?(k>2?b:h):d;i.update()};i.shippingCountry=function(j){switch(j){case"United States":c=d;break;case"Canada":c=20;break;case"Mexico":c=32;break;default:c=h}i.update()};i.applyCoupon=function(j,k){$.get("/order/apply_coupon",{code:j},function(m){if(m.success){var n=parseFloat(m.amount);if(n<1&&n>0){e=n;f=Math.round(i.getPrice()*(1-e));var l=Math.round((1-e)*100);m.message="("+l+"% off!) -$"+f+".00"}else{if(n>0){f=parseInt(m.amount);m.message="-$"+f+".00"}}}else{f=0;e=1}if(k){k(m)}},"json")};i.getPrice=function(){return g};i.getTotal=function(){return Math.floor(i.getPrice()-f)+c};i.getShippingCents=function(){return c*100};i.getDiscountCents=function(){return f*100};i.getFinalCents=function(){return i.getTotal()*100};return i}();