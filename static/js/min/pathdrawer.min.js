var sb=sb||{};sb.pathdrawer=function(e){var c={},b=[],f=[];var a=d3.select("#meshu-container").append("div").style("width","600px").style("height","600px").style("position","absolute").style("z-index","100").append("svg:svg").attr("class","meshu-svg").attr("width","100%").attr("height","100%");var d=a.append("svg:g");c.update=function(){console.log(f,"updating");var g=d.selectAll("path").data(f);g.enter().append("svg:path");g.exit().remove();g.attr("d",function(h){return c.drawPath(h.pts)});g.attr("stroke","black").attr("fill","none").attr("stroke-linecap","round");g.attr("stroke-width",function(j,h){return 20*Math.pow(1-j.d,0.5)+"px"});g.style("stroke-width",function(j,h){return 20*Math.pow(1-j.d,0.5)+"px"})};c.drawPath=function(m){var g=[];var h=m.length;for(var j=0;j<h;j++){var n={lat:m[j][0],lon:m[j][1]};var k=e.l2p(n);g.push([k.x,k.y])}return"M"+g.join("L")};c.addRoute=function(m){b.push(m);var h=m.length;for(var j=0;j<h-2;j+=2){var k=[m[j],m[j+1]];var g=[m[j+2],m[j+3]];f.push({pts:[k,g],d:j/m.length})}c.update()};return c};