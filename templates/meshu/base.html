<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="{{ STATIC_URL }}lib/jquery.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}lib/jquery.validate.js"></script>
    <link rel="apple-touch-icon" href="{{ STATIC_URL }}/images/icons/touch_icon.png" />
    <link rel="shortcut icon" href="{{ STATIC_URL }}/images/icons/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css"/>
    {% block styles %}
    {% endblock %}
    <!--[if IE]>
	    <script type="text/javascript" src="{{ STATIC_URL }}js/ie.patches.js"></script>
    <![endif]-->
    <title>{% block title %}Meshu{% endblock %}</title>
    <meta name="description" content="Meshu turns your places into beautiful, unique jewelry.">
    <meta name="keywords" content="jewelry,generative,lasercut,earrings,cufflinks,necklaces,gift ideas,foursquare">
	<script type="text/javascript">

	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-29306854-1']);
	  _gaq.push(['_trackPageview']);

	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();

	</script>
</head>

<body class="{% block body_class %}{% endblock %}">
	<p style="text-align: center; font-size:20px;">☃ <span style="width: 600px;
font-size: 14px;
padding: 5px 15px;
background: #aaa;
color: white;">Happy Holiday Shopping! Enjoy an extra 10% off all orders by using the code <b>CYBERBLACK</b></span> ☃</p>
	<div id="top">
		{% block navigation %}
		<ul id="nav">
		    <li class="nav-list"><a href="/make/">make</a></li>
			<li class="nav-list"><a href="/gallery/">gallery</a></li>
			<li class="nav-list"><a href="/about/">about</a></li>
			<li class="nav-list" style="margin-right: 20px; padding-right: 20px; border-right: 1px solid #000;"><a href="http://blog.meshu.io/">blog</a></li>
			<li id="profile" {% if user.is_anonymous %}style="display: none;"{% endif %} class="nav-list"><a href="/user/">my meshus</a></li>
			{% if cart_count > 0 %}<li class="nav-list" id="nav-cart"><a href="/cart/view">cart
			<span class="num">({{ cart_count }})</span></a></li>{% endif %}

			<li id="login" {% if user.is_authenticated %}style="display: none;"{% endif %} class="nav-list last">login</li>
			<li id="logout" {% if user.is_anonymous %}style="display: none;"{% endif %} class="nav-list last">logout</li>
		</ul>

		<div id="login-form" class="signin">
			<h2 class="account">Please sign up to continue</h2>
			<h2 class="signin">Please log in to continue</h2>

			<fb:login-button size="large" style="overflow:hidden;" onlogin="userFacebookLoggedIn()" scope="email,user_photos,friends_photos,user_status,friends_status,user_checkins,friends_checkins">Login with Facebook</fb:login-button>

			<hr>
			<p class="or"><span>or</span></p>

			<ul id="login-form-switch" class="tab-switch">
				<li id="tab-account" class="active">Create an Account</li>
				<li id="tab-signin">Log In</li>
			</ul>
			<div id="csrf">
				{% csrf_token %}
			</div>
			<form id="form-signin" class="signin">
				<div class="login-row">
					<label for="signin_name">Email</label>
					<input id="signin_name" class="required email" type="text" name="signin_name" maxlength="30" style="margin-left: 47px;">
				</div>
				<div class="login-row">
					<label for="signin_password">Password</label>
					<input type="password" class="required" name="signin_password" id="signin_password">
					<label for="signin_password" class="error login-error">Oops, wrong email or password.</label>
				</div>
				<p>Forgot your password? Click <a href="/user/forgot/">here</a> to reset it.</p>
				<div class="login-buttons">
					<div class="login-cancel button">Cancel</div>
					<input id="login-signin" class="button" type="submit" value="Login">
				</div>
			</form>
			<form id="form-account" class="account">
				<div class="login-row">
					<label for="account_name">Email</label>
					<input id="account_name" class="required email" type="text" name="account_name" maxlength="30" style="margin-left: 47px;">
				</div>
				<div class="login-row">
					<label for="account_password">Password</label>
					<input type="password" class="required" name="account_password" id="account_password">
				</div>
				<div class="login-row">
					<label for="repeat_password" class="reenter">Re-enter Password</label>
					<input type="password" class="required" name="repeat_password" id="repeat_password" style="margin-left: 14px;">
				</div>
				<p class="account-message">Don't worry, we'll never give your email address to anyone else. We hate spam as much as you do!</p>
				<div class="login-buttons">
					<div class="login-cancel button">Cancel</div>
					<input id="login-account" class="button" type="submit" value="Create Account">
				</div>
			</form>
		</div>
		{% endblock %}
		<a href="/"><img src="{{ STATIC_URL }}images/logo.png" alt="meshu"/></a>
	</div>

	<div id="content" class="{% block page_type %}{% endblock %}">
		{% block content %}
		{% endblock %}
		<div id="modal-bg"></div>
	</div>

	{% block footer %}
	{% endblock %}

{% block olark %}
<!-- begin olark code --><script data-cfasync="false" type='text/javascript'>/*{literal}<![CDATA[*/
/*
window.olark||(function(c){var f=window,d=document,l=f.location.protocol=="https:"?"https:":"http:",z=c.name,r="load";var nt=function(){f[z]=function(){(a.s=a.s||[]).push(arguments)};var a=f[z]._={},q=c.methods.length;while(q--){(function(n){f[z][n]=function(){f[z]("call",n,arguments)}})(c.methods[q])}a.l=c.loader;a.i=nt;a.p={0:+new Date};a.P=function(u){a.p[u]=new Date-a.p[0]};function s(){a.P(r);f[z](r)}f.addEventListener?f.addEventListener(r,s,false):f.attachEvent("on"+r,s);var ld=function(){function p(hd){hd="head";return["<",hd,"></",hd,"><",i,' onl' + 'oad="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='",l,"//",a.l,"'",'"',"></",i,">"].join("")}var i="body",m=d[i];if(!m){return setTimeout(ld,100)}a.P(1);var j="appendChild",h="createElement",k="src",n=d[h]("div"),v=n[j](d[h](z)),b=d[h]("iframe"),g="document",e="domain",o;n.style.display="none";m.insertBefore(n,m.firstChild).id=z;b.frameBorder="0";b.id=z+"-loader";if(/MSIE[ ]+6/.test(navigator.userAgent)){b.src="javascript:false"}b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};ld()};nt()})({loader: "static.olark.com/jsclient/loader0.js",name:"olark",methods:["configure","extend","declare","identify"]});
*/
/* custom configuration goes here (www.olark.com/documentation) */

/* olark.identify('7626-379-10-2860'); */

/*]]>{/literal}*/</script><noscript><a href="https://www.olark.com/site/7626-379-10-2860/contact" title="Contact us" target="_blank">Questions? Feedback?</a> powered by <a href="http://www.olark.com?welcome" title="Olark live chat software">Olark live chat software</a></noscript><!-- end olark code -->
{% endblock olark %}

<!-- Facebook specific code -->
<div id="fb-root"></div>
</body>

	<!-- Facebook specific code -->
	<script type="text/javascript">
	// when the Facebook SDK is loaded, run this
	{% block facebook_init %}
	window.fbAsyncInit = function() {
	    FB.init({
	        appId      : '324846177609340', // App ID
	        channelUrl : '{{ STATIC_URL }}lib/channel.html',
	        status     : true, // check login status
	        cookie     : true, // enable cookies to allow the server to access the session
	        xfbml      : true  // parse XFBML
	    });

	    // facebook specific code that runs on each page
		{% block fb_code %}
		{% endblock %}
	};
	{% endblock facebook_init %}
	</script>

    {% if debug == false %}
	<script type="text/javascript" src="{{ STATIC_URL }}js/min/facebookapp.min.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}js/min/utils.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/min/user.min.js"></script>
    {% else %}
	<script type="text/javascript" src="{{ STATIC_URL }}js/facebookapp.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}js/utils.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/user.js"></script>
    {% endif %}
    <script type="text/javascript">
    	// django static url
    	var static_url = "{{ STATIC_URL }}";

    	{% if user.is_authenticated %}
    		user.loggedIn = true;
    	{% endif %}

    	/* browser detect */
    	$.fn.detect = function() {
			var nav = navigator.userAgent,
				classes = {
					ie: nav.match(/MSIE\s([^;]*)/) ? true : false,
					ios: nav.match(/like Mac OS X/i) ? true : false,
					iphone: nav.match(/iPhone/i) ? true : false,
					ipad: nav.match(/iPad/i) ? true : false,
					android: nav.match(/Android/i) ? true : false,
					webos: nav.match(/WebOS/i) ? true : false,
					firefox: nav.match(/Firefox/i) ? true : false,
					webkit: nav.match(/WebKit/i) ? true : false,
					safari: nav.match(/Safari/i) ? true : false,
					chrome: nav.match(/Chrome/i) ? true : false,
					opera: nav.match(/Opera/i) ? true : false
				};
			if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){
				var ieversion= Math.floor(new Number(RegExp.$1));
				var ieClass = "ie"+ieversion;
			}
			classes.mobile = classes.iphone || classes.android;
			for (var klass in classes) {
				if (klass == "ie") this.addClass(ieClass);
				this.toggleClass(klass, classes[klass]);
			}
			return this;
		};
		$("body").detect();
    </script>

	{% block script %}
	{% endblock %}
	{% block resources %}
	{% endblock %}
</html>
