{% extends "meshu/item/item.html" %}

{% block styles %}

<style type="text/css" media="screen">

#ring-preview-frame {
  /*-moz-transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  -moz-transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) translate3d(0px,0px,0px);
  -webkit-transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) translate3d(0px,0px,0px);*/
  position: absolute;
  top: -600px;
  left: 250px;
}

.strip {-moz-transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  -moz-animation: spin 25s infinite linear;
  -webkit-animation: spin 25s infinite linear}

.strip div {
  position: absolute;
  /*background: #000 url(http://baloziproductions.com/thailand-sunrise.jpg);  /* background image is 792px 320px */*/
  border: 1px solid black;
  height: 600px;
  width: 26px;
  opacity: .75;
}
@-moz-keyframes spin {
  from { -moz-transform: rotateY(0)}
  to   { -moz-transform: rotateY(-360deg)}}

@-webkit-keyframes spin {
  from { -webkit-transform: rotateY(0)}
  to   { -webkit-transform: rotateY(-360deg)}}

</style>
{% endblock %}

{% block finish %}
<div id="ring-preview-frame">
	<div id="ring-preview-strip-container" class="strip">
		<div class="a"></div>
		<div class="b"></div>
		<div class="c"></div>
		<div class="d"></div>
		<div class="e"></div>
		<div class="f"></div>
		<div class="g"></div>
		<div class="h"></div>
		<div class="i"></div>
		<div class="j"></div>
		<div class="k"></div>
		<div class="l"></div>
		<div class="m"></div>
		<div class="n"></div>
		<div class="o"></div>
		<div class="p"></div>
		<div class="q"></div>
		<div class="r"></div>
		<div class="s"></div>
		<div class="t"></div>
		<div class="u"></div>
		<div class="v"></div>
		<div class="w"></div>
		<div class="x"></div>
	</div>
</div>
{% endblock %}

{% block resources %}
{{ block.super }}

    <script type="text/javascript">

	var data = [];
	for (var i = 0; i < 24; i++) {
	  var rotate = 'rotateY(' + (i * 15) + 'deg) translateZ(97px)';
	  data.push({
	    'class': String.fromCharCode(97 + i), // 'a' through 'x'
	    'background-position': (600 - (25 * i)) + 'px 0',
	    '-moz-transform': rotate,
	    '-webkit-transform': rotate
	  });
	}
  $.each(data,function(i,v){
    $("."+v["class"]).css({
      "background-position":v["background-position"],
      "-moz-transform":v["-moz-transform"],
      "-webkit-transform":v["-webkit-transform"]
    })
  });

    var previewRing = function() {
    	sb.rasterizer.thumbnail(meshu, function(canvas) {
    		var ctx = canvas.getContext('2d');

    		// var strips = d3.selectAll(".strip div");

    		// strips.data(data)
    		// 	.enter()
    		// 		.append()
    		for (var j = 0; j < data.length; j++) {
    			var d = data[j];
    			var canvas = document.createElement('canvas');
    			$('.' + d.class)
    		}
    	});
    };

    </script>
{% endblock %}