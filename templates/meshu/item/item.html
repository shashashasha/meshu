{% extends "meshu/item/base_item.html" %}

{% block title %}Meshu - Make Your Own{% endblock %}

{% block page_type %}edit{% endblock page_type %}

{% block page_title %}Facet{% endblock %}

{% block tooltips %}
<div class="tooltip top" style="top: 125px; left: 20px;">
    <span>Start by searching for an address or city</span>
    <b class="notch"></b>
</div>
<div class="tooltip" style="top: 280px; right: 175px;">
    <span>Or add points by clicking on the map</span>
    <b class="notch"></b>
</div>
<div class="tooltip" style="top: 511px; left: 20px;">
    <span>You can also use your checkins!</span>
    <b class="notch"></b>
</div>
{% endblock %}

{% block finish %}
    <div class="connect-wrapper"><span class="title">Or, connect: </span><div class="facebook-auth button">Facebook </div><div class="foursquare-auth button">Foursquare <img src="https://playfoursquare.s3.amazonaws.com/press/logo/icon-36x36.png"></div></div>
    <!-- <div id="finish-button" class="nav next start-order">Continue</div> -->
{% endblock %}

{% block products %}
    <div class="wrapper" id="wrapper-pendant">
        <!-- <div class="frame"> -->
            <svg id="preview-pendant" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_pendant.png" width="300" height="300" x="0" y="0">
            </svg>
            <p>Pendant Necklace</p>
            <p class="note">pendant max side length: 1.5"</p>
            <p class="note">chain length: 18"</p>
        <!-- </div> -->
    </div>
    <div class="wrapper" id="wrapper-earrings">
        <!-- <div class="frame"> -->
            <svg id="preview-earrings" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_earrings.png" width="300" height="300" x="0" y="0">
            </svg>
            <p>Earrings</p>
            <p class="note">earrings 1.75" tall</p>
            <p class="note">nickel-free posts available</p>
        <!-- </div> -->
    </div>
    <div class="wrapper last" id="wrapper-necklace">
        <!-- <div class="frame"> -->
            <svg id="preview-necklace" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_necklace.png" width="300" height="300" x="0" y="0">
            </svg>
            <p>Large Necklace</p>
            <p class="note">pendant max side length: 3"</p>
            <p class="note">chain length: 18"</p>
        <!-- </div> -->
    </div>
    <div class="wrapper" id="wrapper-cufflinks">
        <!-- <div class="frame"> -->
            <svg id="preview-cufflinks" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_cufflinks.png" width="300" height="300" x="0" y="0">
            </svg>
            <p>Cufflinks</p>
            <p class="note">cufflink max side length: 1.5"</p>
            <p class="note important">we recommend using 4-10 points for cufflinks</p>
        <!-- </div> -->
    </div>
    <div class="wrapper last" id="wrapper-ring">
        <div class="ring-frame">
            <div class="tri"></div>
            <div class="triangle">new</div>
            <img id="ring-img" src="{{ STATIC_URL }}images/preview/preview_ring.png">
            <div class="ring-preview-frame">
                <div class="ring-preview-strip-container strip">
                </div>
            </div>
        </div>
        <p>Ring</p>
        <p class="note">available in sizes 4-14</p>
        <p class="note important">we recommend using 4-10 points for rings</p>
    </div>
    <!-- <p class="cufflinks note" style="width:260px;">Contact us at <a href="mailto:hi@meshu.io" style="color:#000">hi@meshu.io</a> for cufflink requests.</p> -->
{% endblock %}

{% block materials %}
    <li id="amber-bamboo" class="material-option">
        <img src="{{ STATIC_URL }}images/materials/facet-amber-bamboo.jpg" class="img">
        Bamboo<span class="price"></span>
    </li>
    <li id="black-acrylic" class="material-option">
        <img src="{{ STATIC_URL }}images/materials/facet-black-acrylic.jpg" class="img">
        Black Acrylic<span class="price"></span>
    </li>
    <li id="white-acrylic" class="material-option">
        <img src="{{ STATIC_URL }}images/materials/facet-white-acrylic.jpg" class="img">
        White Acrylic<span class="price"></span>
    </li>
    <li id="black-nylon" class="material-option">
        <img src="{{ STATIC_URL }}images/materials/facet-black-nylon.jpg" class="img">
        Black Nylon<span class="price"></span>
    </li>
    <li id="white-nylon" class="material-option">
        <img src="{{ STATIC_URL }}images/materials/facet-white-nylon.jpg" class="img">
        White Nylon<span class="price"></span>
    </li>
    <li id="sterling-silver" class="material-option">
        <img src="{{ STATIC_URL }}images/materials/facet-silver.jpg" class="img">
        Sterling Silver<span class="price"></span>
    </li>
{% endblock %}

{% block final-touch %}
    <div id="final-ring">
        <!-- mesh.style(ringsize) -->
        <div class="frame"></div>
        <h2 class="add-on-header">Ring Size: <span id="ring-number">7</span></h2>
        <p>Drag the slider below to adjust the ring size:</p>
        <input id="ring-range" type="range" value="7" min="4" max="14" step=".5"/>
    </div>
    <div id="final-rotate">
        <svg id="rotate"></svg>
        <div id="rotate-cw" class="rotate-arrow">&#8635;</div>
        <div id="rotate-ccw" class="rotate-arrow">&#8634;</div>
        <h2 class="add-on-header">Meshu Rotation:</h2>
        <p>If you'd like to adjust the orientation of your meshu, rotate it by clicking on one of the pink corners in this preview box.</p>
    </div>
{% endblock %}

{% block script-specific %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/mesh.facet.js"></script>
{% endblock %}

{% block resources %}
{{ block.super }}

    <script type="text/javascript">

    var data = [],
    bgWidth = 500,
    stripNum = 24,
    stripWidth = (bgWidth / stripNum);

    for (var i = 0; i < stripNum; i++) {
      var rotate = 'rotateY(' + (i * 360 / stripNum) + 'deg) translateZ(79px)';
      data.push({
        // 'class': String.fromCharCode(97 + i), // 'a' through 'x'
        'class': 'strip-rotation strip-' + i,
        'background-position': (bgWidth - (stripWidth * i)) + 'px 0',
        '-moz-transform': rotate,
        '-webkit-transform': rotate
      });
    }

    var strips = d3.select(".ring-preview-strip-container")
        .selectAll("div")
        .data(data);

    strips.enter()
        .append("div")
            .attr("class", function(d) { return d.class; })
            .style("background-position", function(d) { return d["background-position"]; })
            .style("-moz-transform", function(d) { return d["-moz-transform"]; })
            .style("-webkit-transform", function(d) { return d["-webkit-transform"]; })
            .style("-webkit-transform-style", "preserve-3d");

    </script>
{% endblock %}