{% extends "meshu/item/base_item.html" %}

{% block title %}Meshu - Make Your Own{% endblock %}

{% block page_type %}edit{% endblock page_type %}

{% block page_title %}Step 1: Choose Your Places{% endblock %}

{% block tooltips %}
<div class="tooltip top left" style="top: 125px; left: 20px;">
    <span>Start by searching for an address or city</span>
    <b class="notch"></b>
</div>
<div class="tooltip left" style="top: 280px; right: 175px;">
    <span>Or add points by clicking on the map</span>
    <b class="notch"></b>
</div>
<div class="tooltip left" style="top: 511px; left: 20px;">
    <span>You can also use your checkins!</span>
    <b class="notch"></b>
</div>
{% endblock %}

{% block finish %}
    <div class="connect-wrapper"><span class="title">Or, use your checkins from:</span><div class="facebook-auth button">Facebook </div><div class="foursquare-auth button">Foursquare <img src="https://playfoursquare.s3.amazonaws.com/press/logo/icon-36x36.png"></div></div>
{% endblock %}

{% block products %}
    <div class="wrapper" id="wrapper-pendant">
            <svg id="preview-pendant" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_pendant.png" width="300" height="300" x="0" y="0">
            </svg>
            <p class="title">Pendant Necklace</p>
            <p class="note">pendant max side length: 1.5"</p>
            <p class="note">chain length: 18"</p>
    </div>
    <div class="wrapper" id="wrapper-earrings">
            <svg id="preview-earrings" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_earrings.png" width="300" height="300" x="0" y="0">
            </svg>
            <p class="title">Earrings</p>
            <p class="note">earrings 1.75" tall</p>
            <p class="note">nickel-free posts available</p>
    </div>
    <div class="wrapper last" id="wrapper-necklace">
            <svg id="preview-necklace" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_necklace.png" width="300" height="300" x="0" y="0">
            </svg>
            <p class="title">Large Necklace</p>
            <p class="note">pendant max side length: 3"</p>
            <p class="note">chain length: 18"</p>
    </div>
    <!-- <div class="wrapper" id="wrapper-cufflinks">
            <svg id="preview-cufflinks" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_cufflinks.png" width="300" height="300" x="0" y="0">
            </svg>
            <p class="title">Cufflinks</p>
            <p class="note">cufflink max side length: 1.25"</p>
            <p class="note important">we recommend using 4-10 points for cufflinks</p>
    </div> -->
    <div class="wrapper" id="wrapper-ring">
        <div class="ring-frame">
            <img id="ring-img" src="{{ STATIC_URL }}images/preview/preview_ring.png">
            <svg id="preview-ring" width="100%" height="282">
                <image xlink:href="{{ STATIC_URL }}images/preview/preview_ring_ie.png" width="300" height="300" x=0 y=0>
            </svg>
            <div class="ring-preview-frame">
                <canvas id="ring-preview-canvas" width="500" height="150"></canvas>
                <div class="ring-preview-strip-container strip">
                </div>
            </div>
        </div>
        <p class="title">Ring</p>
        <p class="note">available in sizes 4-14</p>
        <p class="note important">we recommend using 4-10 points for rings</p>
    </div>
    <!-- <div class="wrapper" id="wrapper-medium_poster">
        <svg id="preview-medium_poster" width="100%" height="282">
            <rect width="195" height="146" x="52" y="77" fill="#E5E5E5">
        </svg>
        <p class="title">Medium Poster</p>
        <p class="note">24"x18" on matte paper</p>
    </div>
    <div class="wrapper last" id="wrapper-small_poster">
        <svg id="preview-small_poster" width="100%" height="282">
            <rect width="108" height="82" x="96" y="109" fill="#E5E5E5">
        </svg>
        <p class="title">Small Poster</p>
        <p class="note">10"x8" on matte paper</p>
    </div>
    <div class="ie9-note">
        To view a 3D model of this ring, please view this page in
        <a href="https://www.google.com/chrome" target="_blank">Chrome</a>, <a href="http://www.apple.com/safari/download/" target="_blank">Safari</a>, or <a href="http://www.mozilla.org/en-US/firefox/new/" target="_blank">Firefox</a>.
    </div> -->
{% endblock %}

{% block materials %}
    <li id="sterling-silver" class="material-option">
        <div class="img-wrapper">
            <img src="{{ STATIC_URL }}images/materials/facet-silver.jpg" class="img default">
            <img src="{{ STATIC_URL }}images/materials/facet-ring-silver.jpg" class="img ring">
            <img src="{{ STATIC_URL }}images/materials/facet-cufflink-silver.jpg" class="img cufflinks">
        </div>
        Sterling Silver<span class="price"></span>
    </li>
    <li id="polished-brass" class="material-option">
        <div class="img-wrapper">
            <img src="{{ STATIC_URL }}images/materials/facet-polished-brass.jpg" class="img default">
            <img src="{{ STATIC_URL }}images/materials/facet-ring-brass.jpg" class="img ring">
            <img src="{{ STATIC_URL }}images/materials/facet-cufflink-brass.jpg" class="img cufflinks">
        </div>
        Polished Brass<span class="price"></span>
    </li>
    <li id="amber-bamboo" class="material-option">
        <div class="img-wrapper">
            <img src="{{ STATIC_URL }}images/materials/facet-amber-bamboo.jpg" class="img">
        </div>
        Bamboo<span class="price"></span>
    </li>
    <li id="white-acrylic" class="material-option">
        <div class="img-wrapper">
            <img src="{{ STATIC_URL }}images/materials/facet-white-acrylic.jpg" class="img">
        </div>
        White Acrylic<span class="price"></span>
    </li>
    <li id="black-acrylic" class="material-option">
        <div class="img-wrapper">
            <img src="{{ STATIC_URL }}images/materials/facet-black-acrylic.jpg" class="img">
        </div>
        Black Acrylic<span class="price"></span>
    </li>
    <!-- <li id="black-nylon" class="material-option">
        <img src="{{ STATIC_URL }}images/materials/facet-black-nylon.jpg" class="img">
        Black Nylon<span class="price"></span>
    </li> -->
    <li id="white-nylon" class="material-option">
        <div class="img-wrapper">
            <img src="{{ STATIC_URL }}images/materials/facet-white-nylon.jpg" class="img default">
            <img src="{{ STATIC_URL }}images/materials/facet-ring-nylon.jpg" class="img ring">
        </div>
        White Nylon<span class="price"></span>
    </li>
{% endblock %}

{% block final-touch %}
    <div id="final-ring">
        <div class="frame"></div>
        <h2 class="add-on-header">Ring Size: <span id="ring-number"></span></h2>
        <p>Drag the slider below to adjust the ring size:</p>
        <input id="ring-range" type="range" min="4" max="14" step=".5"/>
        <p class="note" style="margin-top:44px;">Not sure about your ring size? <a href="http://findmyringsize.com/" style="color:#808080; text-decoration:underline;">Click here</a> for help.</p>
    </div>
    <div id="final-rotate">
        <svg id="rotate"></svg>
        <div id="rotate-cw" class="rotate-arrow"></div>
        <div id="rotate-ccw" class="rotate-arrow"></div>
        <h2 class="add-on-header">Meshu Rotation:</h2>
        <p>If you'd like to adjust the orientation of your meshu, click on one of the above arrows to rotate it.</p>
    </div>
{% endblock %}

{% block script-specific %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/mesh.facet.js"></script>
{% endblock %}

{% block resources %}
{{ block.super }}

    <script type="text/javascript">

    var data = [],
    bgWidth = 500,
    stripNum = 24,
    stripWidth = (bgWidth / stripNum);

    for (var i = 0; i < stripNum; i++) {
      var rotate = 'rotateY(' + (i * 360 / stripNum) + 'deg) translateZ(79px)';
      data.push({
        // 'class': String.fromCharCode(97 + i), // 'a' through 'x'
        'class': 'strip-rotation strip-' + i,
        'background-position': (bgWidth - (stripWidth * i)) + 'px 0',
        '-moz-transform': rotate,
        '-webkit-transform': rotate
      });
    }

    var strips = d3.select(".ring-preview-strip-container")
        .selectAll("div")
        .data(data);

    strips.enter()
        .append("div")
            .attr("class", function(d) { return d.class; })
            .style("background-position", function(d) { return d["background-position"]; })
            .style("-moz-transform", function(d) { return d["-moz-transform"]; })
            .style("-webkit-transform", function(d) { return d["-webkit-transform"]; })
            .style("-webkit-transform-style", "preserve-3d");

    </script>
{% endblock %}